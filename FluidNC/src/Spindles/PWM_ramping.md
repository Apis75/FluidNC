Set the **use_ramp:**  value to **true** to have the PWM ramp up or down to the desired speed. The ramp duration is proportional to the **spinup_ms** and **spindown_ms** values. It will use the full duration when changing the full range as defined in the **speed_map**. It will use a linear fraction of the full duration when the speed change is less than the full range. 

The primary purpose of this feature is to limit current in the spindle. If your spindle does not have a problem with current, you are better off not using this feature. Most spindle controllers have internal means of limiting current.  Since it adds delays to the speed changes it will only work from normal gcode. The feature is not used with [speed overrides](https://github.com/bdring/FluidNC/wiki/Overrides). The PWM will change in one step.  In many cases you probably can still use overrides to increase or decrease the speed because each override only changes the speed by 1% or 10%. That is not likely to cause a big power surge. Be careful with speed override reset. If you lowered the speed via overrides, the reset might be a big jump in current.

There are some restrictions on other config values to keep the ramping resolution reasonable. The max speed in your **speed_map** must be over 300. The **spinup_ms** and **spindown_ms** values must be greater than 500.